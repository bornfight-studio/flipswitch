!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Flipswitch",[],t):"object"==typeof exports?exports.Flipswitch=t():e.Flipswitch=t()}(window,function(){return function(e){var t={};function s(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=1)}([function(e,t,s){},function(e,t,s){"use strict";s.r(t);var i;s(0);!function(e){e.SECTIONS_MISSING="No section elements have been defined!",e.ONLY_ONE_PARENT_ELEMENT="Exactly one element must have the parentClass",e.PARENT_MISSING="The element with parentClass does not exist",e.ELEMENT_MISSING="Elements with elementClass are not defined",e.TOP_WRAPPER_MISSING="Top wrapper element is missing!",e.ELEMENT_WRAPPER_MISSING="Element wrapper element is missing!",e.MAIN_WRAPPER_MISSING="Main wrapper element is missing!"}(i||(i={}));class n{constructor(e,t,s,i,n){this.element=void 0,this.sections=void 0,this.element=t,this.sections=s,this.defaults=e,this.variations=i,this.init(n)}init(e){if(void 0===this.element)throw new Error(i.ELEMENT_MISSING);const t=window.getComputedStyle(this.element);let s=0,n=0;if(null!=t.transform){const e=new WebKitCSSMatrix(t.transform);s=e.m41,n=e.m42}const r=document.createElement("div");r.classList.add("js-flipswitch-main-wrapper","c-flipswitch__main-wrapper"),r.style.position="fixed",null!=this.defaults.offsetY?r.style.top=`${this.element.offsetTop+this.defaults.offsetY}px`:r.style.top=`${this.element.offsetTop}px`,null!=this.defaults.offsetX?r.style.left=`${this.element.offsetLeft+this.defaults.offsetX}px`:r.style.left=`${this.element.offsetLeft}px`,r.style.width=`${this.element.offsetWidth}px`,r.style.height=`${this.element.offsetHeight}px`,r.style.transform=`translate(${s}px, ${n}px)`,this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.transform="none";const l=document.createElement("div");l.classList.add("js-flipswitch-element-top-wrapper","c-flipswitch__element-top-wrapper");const o=document.createElement("div");o.classList.add("js-flipswitch-element-wrapper","c-flipswitch__element-wrapper");const a=this.element.parentElement,h={main_wrapper:r,element_top_wrapper:l,element_wrapper:o,resolve_fun:e};if(this.iterateItems(h),a.removeChild(this.element),""===this.defaults.parentClass)a.appendChild(r);else{const e=document.querySelector(`.${this.defaults.parentClass}`),t=document.querySelectorAll(`.${this.defaults.parentClass}`);if(t.length>1)throw new Error(i.ONLY_ONE_PARENT_ELEMENT);if(0===t.length)throw new Error(i.PARENT_MISSING);e.appendChild(r)}}iterateItems(e){const t=e.main_wrapper,s=e.element_top_wrapper,n=e.element_wrapper,r=e.resolve_fun;if(null==this.sections||null==this.element||null==s||null==n||null==t){if(null==this.sections)throw new Error(i.SECTIONS_MISSING);if(null==this.element)throw new Error(i.ELEMENT_MISSING);if(null==s)throw new Error(i.TOP_WRAPPER_MISSING);if(null==n)throw new Error(i.ELEMENT_WRAPPER_MISSING);if(null==t)throw new Error(i.MAIN_WRAPPER_MISSING)}for(let e=0;e<this.variations.length+1;e++){const i=s.cloneNode(!0),r=n.cloneNode(!0),l=this.element.cloneNode(!0);if(e===this.variations.length)r.appendChild(l),i.appendChild(r),i.classList.add("c-flipswitch__element-top-wrapper--default"),t.appendChild(i);else{const s=this.variations[e]||"";""!==s&&l.classList.add(s),r.appendChild(l),i.appendChild(r),t.appendChild(i)}}r(!0)}}class r{constructor(e,t,s,n){if(this.sections=void 0,this.mainWrapper=document.querySelector(".js-flipswitch-main-wrapper"),this.elementWrappers=document.querySelectorAll(".js-flipswitch-element-wrapper"),this.elementTopWrappers=document.querySelectorAll(".js-flipswitch-element-top-wrapper"),this.defaultSection=!1,this.transformOnX=0,this.elements=document.querySelectorAll(`.${t}`),this.sections=s,this.defaults=e,this.variations=n,null==this.mainWrapper)throw new Error(i.ONLY_ONE_PARENT_ELEMENT);const r=window.getComputedStyle(this.mainWrapper);if(null!=r.transform){const e=new WebKitCSSMatrix(r.transform);this.transformOnX=e.m42}this.init()}init(){const e=this.mainWrapper.offsetTop,t=this.mainWrapper.offsetHeight,s=e+t;if(null==this.sections||this.sections.length<=0)throw new Error(i.SECTIONS_MISSING);this.checkScrollPosition(e,t,s),this.defaults.useScroll&&window.addEventListener("scroll",()=>{this.checkScrollPosition(e,t,s)})}checkScrollPosition(e,t,s){if(null==this.sections||this.sections.length<=0)throw new Error(i.SECTIONS_MISSING);for(let i=0;i<this.sections.length;i++)this.iterateSections(t,e,i,s);this.defaults.useScroll||(null!=this.defaults.throttle&&0!==this.defaults.throttle?setTimeout(()=>{requestAnimationFrame(()=>this.checkScrollPosition(e,t,s))},this.defaults.throttle):requestAnimationFrame(()=>this.checkScrollPosition(e,t,s)))}iterateSections(e,t,s,n){if(null==this.sections||this.sections.length<=0)throw new Error(i.SECTIONS_MISSING);const r=this.sections[s].getBoundingClientRect().top-this.transformOnX,l=this.getPercentage(this.sections[s].offsetHeight+r-t,e),o=this.findIndex(this.sections[s]);if(n>r&&n<r+e){const i=this.getPercentage(r-t,e);o>0&&!this.defaultSection&&(this.sections[s].offsetTop>this.sections[s-1].offsetTop+this.sections[s-1].offsetHeight?this.positionElement(this.elementTopWrappers[o-1],this.elementWrappers[o-1],100):this.positionElement(this.elementTopWrappers[o-1],this.elementWrappers[o-1],i)),this.elementTopWrappers[o].style.transform=`translateY(${100-i}%)`,this.elementWrappers[o].style.transform=`translateY(-${100-i}%)`,this.setInvisibleWrappers(o)}else if(-(r-t)>this.sections[o].offsetHeight-e&&Math.abs(r-t)<this.sections[o].offsetHeight)o>0&&!this.defaultSection&&this.positionElement(this.elementTopWrappers[o-1],this.elementWrappers[o-1],l),this.positionElement(this.elementTopWrappers[o],this.elementWrappers[o],l),this.setInvisibleWrappers(o);else if(r-t<0&&Math.abs(r-t)<this.sections[s].offsetHeight-e)this.setInvisibleWrappers(o),this.elementTopWrappers[o].style.transform="translateY(0%)",this.elementWrappers[o].style.transform="translateY(0%)";else if(-(r-t)>this.sections[s].offsetHeight&&-(r-t)<this.sections[s].offsetHeight+this.sections[s].offsetHeight-e){this.defaultSection=!0,s>0&&!this.defaultSection&&this.positionElement(this.elementTopWrappers[o-1],this.elementWrappers[o-1],l),this.positionElement(this.elementTopWrappers[o],this.elementWrappers[o],l);for(let e=0;e<this.variations.length;e++)this.elementTopWrappers[e].style.transform="translateY(-100%)",this.elementWrappers[e].style.transform="translateY(-100%)";this.setInvisibleWrappers(o)}}setInvisibleWrappers(e){if(e>0&&void 0!==this.sections)for(let t=0;t<this.variations.length;t++)t<e&&t<e-1?(this.elementWrappers[t].style.transform="translateY(-100%)",this.elementTopWrappers[t].style.transform="translateY(100%)"):t>e&&(this.elementWrappers[t].style.transform="translateY(100%)",this.elementTopWrappers[t].style.transform="translateY(-100%)");else if(void 0!==this.sections)for(let t=0;t<this.variations.length;t++)t>e&&(this.elementWrappers[t].style.transform="translateY(100%)",this.elementTopWrappers[t].style.transform="translateY(-100%)")}findIndex(e){return this.variations.findIndex(t=>t===e.dataset.flipswitchClass)}getPercentage(e,t){return 100-100/t*e}positionElement(e,t,s){s>=100&&s<=-100||(e.style.transform=`translateY(-${s}%)`,t.style.transform=`translateY(${s}%)`)}}s.d(t,"default",function(){return l});class l{constructor(e={}){this.defaults={};if(this.defaults=Object.assign({},{parentClass:"",elementClass:"js-flipswitch-element",sectionsClass:"js-flipswitch-section",useScroll:!1,offsetX:0,offsetY:0,throttle:0},e),this.element=document.querySelector(`.${this.defaults.elementClass}`),null==this.element)throw new Error(i.ELEMENT_MISSING);this.sections=document.querySelectorAll(`.${this.defaults.sectionsClass}`),this.variations=[];for(let e=0;e<this.sections.length;e++){const t=this.sections[e].dataset.flipswitchClass;this.variations.includes(t)||this.variations.push(t)}if(null==this.sections||this.sections.length<=0)throw new Error(i.SECTIONS_MISSING);new Promise((e,t)=>{new n(this.defaults,this.element,this.sections,this.variations,e)}).then(()=>{new r(this.defaults,this.defaults.elementClass,this.sections,this.variations)})}}}])});